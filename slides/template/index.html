<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{{title}}</title>
  {{{style}}}
  <script src="remark-latest.min.js"></script>
  <script>
    var hljs = remark.highlighter.engine;
  </script>
  <script src="terminal.language.js" type="text/javascript"></script>
  <script>
      function create() {
        var sl = remark.create({
          {{{source}}},
          ratio: '16:9',
          highlightStyle: 'solarized-dark',
        });
        var highlighted = document.querySelectorAll("code.terminal span.hljs-ansi");
        Array.prototype.forEach.call(highlighted, function(next) {
          next.insertAdjacentHTML("beforebegin", next.textContent);
          next.parentNode.removeChild(next);
        });
        return sl
      }
      function highlight() {
        var highlighted = document.querySelectorAll("code.terminal span.hljs-ansi");
        Array.prototype.forEach.call(highlighted, function(next) {
          next.insertAdjacentHTML("beforebegin", next.textContent);
          next.parentNode.removeChild(next);
        });
      }
      // extract the embedded styling from ansi spans
    </script>
</head>
<body onload="slideshow = create(); highlight()"></body>
<script defer>
        var highlighted = document.querySelectorAll("code.terminal span.hljs-ansi");
        Array.prototype.forEach.call(highlighted, function(next) {
          next.insertAdjacentHTML("beforebegin", next.textContent);
          next.parentNode.removeChild(next);
        });

</script>
</body>
</html>
